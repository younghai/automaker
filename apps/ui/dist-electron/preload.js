"use strict";const n=require("electron");var t;(function(e){e[e.ERROR=0]="ERROR",e[e.WARN=1]="WARN",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG"})(t||(t={}));const E={error:t.ERROR,warn:t.WARN,info:t.INFO,debug:t.DEBUG},s={reset:"\x1B[0m",red:"\x1B[31m",yellow:"\x1B[33m",blue:"\x1B[34m",magenta:"\x1B[35m",cyan:"\x1B[36m",gray:"\x1B[90m"},r={timestamp:"color: #6b7280; font-size: 11px;",context:"color: #3b82f6; font-weight: 600;",reset:"color: inherit; font-weight: inherit;",levels:{ERROR:"background: #ef4444; color: white; font-weight: bold; padding: 1px 6px; border-radius: 3px;",WARN:"background: #f59e0b; color: white; font-weight: bold; padding: 1px 6px; border-radius: 3px;",INFO:"background: #3b82f6; color: white; font-weight: bold; padding: 1px 6px; border-radius: 3px;",DEBUG:"background: #8b5cf6; color: white; font-weight: bold; padding: 1px 6px; border-radius: 3px;"}},f=typeof globalThis.window<"u";let c=t.INFO;function u(e){if(!f)try{return process.env?.[e]}catch{return}}let R=!f&&u("LOG_COLORS")!=="false",v=u("LOG_TIMESTAMPS")==="true";const g=u("LOG_LEVEL")?.toLowerCase();g&&E[g]!==void 0&&(c=E[g]);function h(){return new Date().toISOString()}function d(){return new Date().toISOString().split("T")[1].slice(0,12)}function l(e,i,o){const a=[];v&&a.push(R?`${s.gray}${h()}${s.reset}`:h());const p=e.padEnd(5);return a.push(R?`${o}${p}${s.reset}`:p),a.push(R?`${s.blue}[${i}]${s.reset}`:`[${i}]`),a.join(" ")}function m(e){if(f)return{error:(...o)=>{c>=t.ERROR&&console.error(`%cERROR%c %c${d()}%c %c[${e}]%c`,r.levels.ERROR,r.reset,r.timestamp,r.reset,r.context,r.reset,...o)},warn:(...o)=>{c>=t.WARN&&console.warn(`%cWARN%c %c${d()}%c %c[${e}]%c`,r.levels.WARN,r.reset,r.timestamp,r.reset,r.context,r.reset,...o)},info:(...o)=>{c>=t.INFO&&console.log(`%cINFO%c %c${d()}%c %c[${e}]%c`,r.levels.INFO,r.reset,r.timestamp,r.reset,r.context,r.reset,...o)},debug:(...o)=>{c>=t.DEBUG&&console.log(`%cDEBUG%c %c${d()}%c %c[${e}]%c`,r.levels.DEBUG,r.reset,r.timestamp,r.reset,r.context,r.reset,...o)}};function i(o,...a){try{console[o](...a)}catch(p){if(p?.code!=="EPIPE")throw p}}return{error:(...o)=>{c>=t.ERROR&&i("error",l("ERROR",e,s.red),...o)},warn:(...o)=>{c>=t.WARN&&i("log",l("WARN",e,s.yellow),...o)},info:(...o)=>{c>=t.INFO&&i("log",l("INFO",e,s.cyan),...o)},debug:(...o)=>{c>=t.DEBUG&&i("log",l("DEBUG",e,s.magenta),...o)}}}const O=m("Preload");n.contextBridge.exposeInMainWorld("electronAPI",{platform:process.platform,isElectron:!0,ping:()=>n.ipcRenderer.invoke("ping"),getServerUrl:()=>n.ipcRenderer.invoke("server:getUrl"),getApiKey:()=>n.ipcRenderer.invoke("auth:getApiKey"),isExternalServerMode:()=>n.ipcRenderer.invoke("auth:isExternalServerMode"),openDirectory:()=>n.ipcRenderer.invoke("dialog:openDirectory"),openFile:e=>n.ipcRenderer.invoke("dialog:openFile",e),saveFile:e=>n.ipcRenderer.invoke("dialog:saveFile",e),openExternalLink:e=>n.ipcRenderer.invoke("shell:openExternal",e),openPath:e=>n.ipcRenderer.invoke("shell:openPath",e),openInEditor:(e,i,o)=>n.ipcRenderer.invoke("shell:openInEditor",e,i,o),getPath:e=>n.ipcRenderer.invoke("app:getPath",e),getVersion:()=>n.ipcRenderer.invoke("app:getVersion"),isPackaged:()=>n.ipcRenderer.invoke("app:isPackaged"),updateMinWidth:e=>n.ipcRenderer.invoke("window:updateMinWidth",e),quit:()=>n.ipcRenderer.invoke("app:quit")});O.info("Electron API exposed (TypeScript)");
